%global namespace mnecas
%global collectionname ovirt
%global ansible_collections_dir ansible/collections/ansible_collections

Name: @PACKAGE_NAME@
Summary: Ansible collection to manage all ovirt releated roles
Version: @RPM_VERSION@
Release: @RPM_RELEASE@%{?release_suffix}%{?dist}
Source0: http://resources.ovirt.org/pub/src/@PACKAGE_NAME@/@PACKAGE_NAME@-@PACKAGE_VERSION@.tar.gz
License: ASL 2.0
Group:          Virtualization/Management
BuildArch:      noarch
Url:            http://www.ovirt.org

Requires: ansible >= 2.9.0

%description
This Ansible role provide funtionality to create virtual machine infrastructure.

%prep
%setup -c -q

%build

%install
echo 'Something may be wrong! 1' > /dev/stderr
export PKG_DATA_DIR_ORIG=%{_datadir}/%{ansible_collections_dir}/%{namespace}/%{collectionname}
export PKG_DATA_DIR=%{buildroot}$PKG_DATA_DIR_ORIG
export PKG_DOC_DIR=%{buildroot}%{_pkgdocdir}
echo 'Something may be wrong! 2' > /dev/stderr
sh build.sh install
echo 'Something may be wrong! 3' > /dev/stderr

%files
%{_datadir}/%{ansible_collections_dir}/%{namespace}/%{collectionname}

%doc README.md
%doc examples/

%license LICENSE

%changelog
* Tue Feb 4 2020 Martin Necas <mnecas@redhat.com> - 1.0.0-1
- Initial release
